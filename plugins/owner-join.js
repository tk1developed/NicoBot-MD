const linkRegex = /chat.whatsapp.com\/([0-9A-Za-z]{20,24})/i;
let enviando;
const handler = async (m, {conn, text, isMods, isOwner, isPrems}) => {
 if (enviando) return;
     enviando = true 
  try {
    const link = text //(m.quoted ? m.quoted.text ? m.quoted.text : text : text) || text;
    if (!link || !link.match(linkRegex)) throw '*âš ï¸ DEBE DE SER UN ENLACE*\n*ğŸ“ Ingrese el enlace de un grupo.*\n\nğŸ’¡ EJEMPLO\n*.join https://chat.whatsapp.com/G7AuDxFPn7e2vGjio7XTIO*';
    const [_, code] = link.match(linkRegex) || [];
    if ( isPrems || isMods || isOwner || m.fromMe) {
      const res = await conn.groupAcceptInvite(code);
      await conn.sendMessage(m.chat, {text: '*âœ¨ï¸ğ˜“ğ˜ªğ˜´ğ˜µğ˜° ğ˜Šğ˜³ğ˜¦ğ˜¢ğ˜¥ğ˜°ğ˜³ ğ˜ ğ˜¢ ğ˜ğ˜¦ ğ˜Œğ˜¯ğ˜µğ˜³ğ˜¢ğ˜¥ğ˜° ğ˜ˆğ˜­ ğ˜ğ˜³ğ˜¶ğ˜±ğ˜°ğŸ’•.*'}, {quoted: m})
      enviando = false 
    } else {
      conn.sendMessage(m.chat, {text: '*âœ… SU ENLACE SE ENVIO A MI PROPIETARIO*\n\nâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ\nâš ï¸ *Su Grupo serÃ¡ Evaluado y QuedarÃ¡ a decisiÃ³n de MÃ­ Propietario(a) si aver se une o no al Grupo.*\nâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ\nâ• *Es posible que su Solicitud sea Rechazada por las siguientes Causas:*\n*1ï¸âƒ£ El Bot estÃ¡ Saturado.*\nâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ\n2ï¸âƒ£ *El Bot fue eliminado del Grupo.*\nâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ\n3ï¸âƒ£ *El Grupo no cumple con las Normativas del bot*\nâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ\n4ï¸âƒ£ *El enlace del grupo se restableciÃ³.*\nâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ\n5ï¸âƒ£ *No se agrega a Grupos segÃºn Mi Propietario.*\nâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆâ”ˆ\nğŸ’Œ *La solicitud puede tardar Horas en ser Respondida. Por favor Tener Paciencia.*'}, {quoted: m});
      const data =       for (const entry of dataArray) await conn.sendMessage(entry + '@s.whatsapp.net', {text: '*[â—] NUEVA SOLICITUD DE UN BOT PARA UN GRUPO [â—]*\n\n*â€”â—‰ Solicitante:* ' + '@' + m.sender.split('@')[0] + '\n*â€”â—‰ Link del grupo:* ' + link, mentions: [m.sender], contextInfo: {forwardingScore: 9999999, isForwarded: true, mentionedJid: [m.sender], "externalAdReply": {"showAdAttribution": true, "containsAutoReply": true, "renderLargerThumbnail": true, "title": global.titulowm2, "containsAutoReply": true, "mediaType": 1, "thumbnail": imagen6, "mediaUrl": `${link}`, "sourceUrl": `${link}`}}}, {quoted: m});
      enviando = false 
    }
  } catch {
    enviando = false 
    throw '*[â—] Lo sentimos, algo salio mal por favor reportelo o vuelva a intentarlo.*';
  }
};
handler.help = ['join [chat.whatsapp.com]'];
handler.tags = ['premium'];
handler.command = /^join|nuevogrupo$/i;
handler.private = true;
export default handler;
